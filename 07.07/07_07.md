# 22.07.07 Spring 수업 내용


## 웹서버
생활코딩 Home Server https://www.youtube.com/watch?v=sQBXgccvE98&list=PLuHgQVnccGMA52uRBmSwqcvtI5IMoFclJ

전화번호처럼 통신기기들이 서로 연결되기 위해서는 IP주소가 필요하다.
IPv4 : 42억개. 0.0.0.0~ 255.255.255.255
	현시대의 통신기기들의 수를 감당하기에는 너무 작아짐.
	IPv6 : 새로운 형식의 주소. 1000년뒤에도 쓸수있을만큼의 큰수.
		현재는 바뀌는 도중의 과도기 시대. 아껴쓰기위해 공유.

NAT(Network Address Translation)
	사설IP를 쓰고있는 HOST들이 클라이언트로서 외부IP(서버)에 접속할수 있게 해주는 기술
	1. 외부로 하는 요청이 '내(내부IP)'가 하는 요청임을 알려야한다.
	2. 응답을 받을때는  '라우터'로 일단받고 다시 '나(내부IP)'에게 받아야한다.
	
공개IP(public IP) = 주소를 알면 누구나 접근할 수 있다.
비공개IP(사설)(private IP)= 내선번호같은거. 지역네트워크 안에서만 쓸수있다.
	사설ip에 할당될수있는 IPv4는 아래와같은 범위내에서 쓰자고 약속되어있다.
	10.0.0.0 ~ 10.255.255.255
	172.16.0.0 ~ 172.31.255.255
	192.168.0.0 ~ 192.168.255.255
	CMD창에서 ipconfig로 ip주소 확인해보고 웹서버의 localhost를 내부ip로 바꿔보기
	
포트포워딩
동적IP, 고정IP
Dynamic DNS

Router : 공유기
	공유기는 WAN과 LAN사이에 위치해서 하나의 IP주소로 여러개의 호스트에게 
	내부 IP주소들을 분배하는 역할을 한다.
	- WAN(Wide Area Network)
	- LAN : Local Area Network (지역 네트워크)
	공유기에 새로운 통신기기가 연결되면 공유기가 알아서 숫자1증가한 내부IP를 할당해준다.
	예) 192.168.0.3
	공유기 자체도 지역네트워크의 일원이기때문에 첫번째 내부IP를 할당받는데
	그놈을 Gateway Address라고 한다.

Port : 포트. 항구. 각 서비스마다 부여받은 번호
	하나의 컴퓨터에서 게임서버, 채팅서버, 미디어서버, 웹서버 등 여러가지 서비스가 제공될 수 있다.
	포트번호는 0번부터 65535번까지 매길수 있다.
	0~1023 : Well known. 예약된 번호
	22-SSH
	80-HTTP (웹서버는 기본적으로 80번포트를 리스닝하도록 되어있다.)
	3306 - MYSQL
	1521 - ORACLE
	8080-TOMCAT
	
	URL을 살펴보자.
	http://opentutorial.org
	에는 opentutorial.org라는 도메인을 가지고있는 웹서버의 ip주소에 http요청을 한다는 말
	http는 80번 포트를 쓰기때문에 http://opentutorial.org:80  과 같다.
	웹브라우저에서 주소로 요청을 보내게되면 디폴트가 HTTP요청이기 때문에 생략가능하다. 
Port Forwarding : 외부에서 내부의 컴퓨터중 하나로 접속할수있게 하는 기술
	공인ip:포트번호 -> 사설ip:포트번호
	공유기의 포트포워드 설정에서 관리
	
Dynamic IP(유동ip)
	ISP : Internet Service Provider(인터넷 서비스 제공자) : SKT, KT 같은곳들
	가입자마다 고정IP를 하나씩 할당하게 되면 IP주소가 턱없이 부족하기 때문에 돌려막기.
	이런 방식으로 SKT가 가지고있는 IP가 100만개밖에 없더라도 500만개의 가입자를 유치할수있다.
	은행의 예금액이 12조밖에 없다. 하지만 은행은 120조를 돌릴수있다. 자금의 유동성.
	만약에 모든 예금자들이 동시에 예금을 인출하면?  은행은 그 돈을 돌려줄수가 없죠. Bankrupt가 발생한다.
	naver.com   55.0.68.120 의 ip의 도메인이였을때
	새로컴퓨터를 부팅했을때 다이나믹 ip를 받아서 ip가 57.10.70.160 으로 바뀌면?
	내가 서비스하고 있는 웹서버를 못찾게 된다. 404가 일어날수도 있고
	어쩌면... 그 컴퓨터가 제공하는 웹서버에 접속해서 이상한 웹사이트가 뜰수도있다.
	그래서 하나의 ip로 일정한 서비스를 제공하기 위해서는
	1. 컴퓨터를 끄지 않아서 ip가 바뀌지 않도록 한다.
	2. 더 비싼돈을 주고 끄더라도 바뀌지 않는 고정 ip를 할당받는다.
	3. 바뀔때마다 도메인에게 바뀐 ip를 알려준다.
	
보유기술
	네트워크(호스팅, 도메인, 포트포워딩, 웹서버, WAS, DHCP)
DHCP : Dynamic Host Configuration Protocol
	내가 할당받은 ip가 바뀔때 사용되는 약속. 자동으로 네트워크 정보들을 할당
	하는법 : 윈도우 - 제어판 - 네트워크&인터넷 - 네트워크 공유센터 - 연결 - 속성 - TCP/IPv4 - 속성
	기본이 자동으로 되어있는데 수동으로 지정해줄수 있다.
	매커니즘 : DHCP 서버가 있어야 한다. 보통 공유기에 내장되어있다.
		그리고 host에는 DHCP Client가 깔려있어야 한다. 보통 host에 내장되어있다.
		host 하드웨어에는 공장에서 할당받은 MAC주소가 있다.
		클라 : 'DHCP서버님. 저는 8c:85:90:0c:e3:cc라고 합니다. IP주소좀 주세요.'
		서버 : '8c:85:90:0c:e3:cc님. 88:36:6C:33:FC:50입니다. 192.168.0.4가 사용가능합니다.'
		클라 : '그럼 그거 쓰겠습니다.'
		서버 : '네, 알겠습니다. 유효시간은 2시간입니다.'
		@Autowired
		BoardMapper mapper;
		'스프링님. BoardMapper타입으로 쓸수있는 인스턴스하나를 할당해주세요.'
		
	공유기 - 네트워크관리 - 내부네트워크 설정 - 여기가 DHCP관리하는곳

추가 공부 키워드
NAS : Network Attached Storage. 네트워크 결합 저장소.
HTTPS : HTTP + Securure.   Let's encript 등에서 무료로 발급
웹호스팅, 서버호스팅, 클라우드 컴퓨팅
Domain


생성자 = 함수와 형태가 같은데 이름은 클래스와 같고 리턴 타입이 없다.
역할 : 클래스라는 설계도대로 인스턴스를 생성할 때 필요한 파라미터들을 강제하는 역할
Criteria -> 속성 3개, 생성자 2개, 함수 0개

인자의 갯수나 데이터 타입이 다르고 이름이 같은 함수를 만들수 있는가?
-> 만들 수 있다. 그걸 오버로드라고 한다.
생성자도 마찬가지로 오버로드를 할 수 있다.

인터페이스에 함수 3개를 정의해놨으면
그것을 구현한 구현체는 꼭 함수 3개만 써야하는가? -> X




<요청>
1. 클라이언트가 정보를 요청을 함
GET = url에 쿼리스트링으로 정보가 전달
POST = url에 노출 되지 않고 숨겨서 전달

<처리>
2. 컨트롤러가 요청을 받아들임
@GETMAPPING, POSTMAPPING으로 리스닝 하고 있다가 요청이 들어오면 처리할 함수를 정의, 실행

3. 컨트롤러가 요청을 처리 할 서비스를 호출
서비스 인터페이스, 구현체 ServiceImpl
구현체는 @Autowired를 통해 주입 받아서 사용

4. 서비스 구현체 실행
쿼리를 처리하기 위해 매퍼를 호출하는 것은 여기에 들어가는 것이 맞겠다

5. 매퍼 인터페이스 실행
매퍼 인터페이스란? 매핑파일에 기재된 SQL을 호출하기 위한 인터페이스이다.
매핑 파일에 있는 SQL을 인터페이스로 호출한다.

6. 쿼리 실행
Mybatis의 namespace에 의해서 인터페이스와 쿼리가 매핑되어 있음
인터페이스의 함수명과 쿼리id가 매핑된다

7. 결과 값을 매퍼에서 서비스 구현체로 넘겨 줌

8. 서비스 구현체의 결과 값을 컨트롤러로 넘겨 줌

9. 컨트롤러는 모델 객체에 데이터 주입

<출력>
10. 클라이언트가 원했던 정보를 보여 줌



.java 파일이 컴파일 되면 .class 파일이 됨. 그 작업을 해주는 프로그램을 컴파일러라고 한다
.class파일은 기계어고 JVM이 실행하는 파일.
.class파일을 다시 .java파일로 변환해주는 프로그램을 디컴파이럴라고 한다.
소스를 공유해주고 싶지 않은 프로젝트라면 클래스 파일만 제공해야지 .java파일을 제공하면 안된다.